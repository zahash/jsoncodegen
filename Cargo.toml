[workspace]
resolver = "3"
members = [
    "cli",
    "codegen-java",
    "codegen-rust",
    "core",
    "dispatch",
    "iota",
    "web",
]

[workspace.package]
version = "0.4.0"
edition = "2024"

[profile.web]
inherits = "release"
opt-level = "z"     # Optimize for size
lto = true          # Enable Link Time Optimization (LTO)
codegen-units = 1   # Forces the compiler to use a single code generation unit to improve optimizations
panic = "abort"     # Remove panic support, reducing code size

[profile.cli]
inherits = "release"
opt-level = "z"
lto = true
codegen-units = 1

# cargo build -p jcg --profile cli
# cargo build -p jsoncodegen-web --target wasm32-unknown-unknown --profile web

# cargo install wasm-bindgen-cli
# wasm-bindgen ./target/wasm32-unknown-unknown/web/jsoncodegen_web.wasm --out-dir ./pkg --target web
