i have a rust program that converts serde_json::Value to source code in various languages.

use std::io;
pub trait CodeGen {
    fn codegen(&mut self, json: serde_json::Value, sink: &mut dyn Sink) -> io::Result<()>;
}
pub trait Sink {
    fn sink<'sink>(&'sink mut self, name: &str) -> io::Result<&'sink mut dyn io::Write>;
}

multiple independent packages implementing the Codegen trait. 
eg: one for java, one for rust, etc... they write to the sink. 

there are multiple packages the implement the sink trait. 
eg: console-sink, file-sink, java-file-sink etc...

for eg: java generator will write each class to a different named sink.
for eg, file-sink, it will open a new file with the name of the sink and write contents to it.

the console-sink will write all contents to console. java sink will write to sink_name.java file
now the question is how to design the cli. 
the cli should have three options the filepath, the code generator name and the sink name

i want to keep the cli dynamic. i don't want it to be one big bloated binary. 
for eg, there might be 100 different languages supported and 10 different sinks. 
but i don't want the user to have a binary that supports everything.

i want the cli to include only the things that the user actually cares about.
i also want it accessible to all users. 
users should not have to install the rust toolchain to compile the source using cargo install.

i want to design this using wasm, wit, wai, etc...
now i need some working production code for everything.
the code generator and sink will be wasm modules that will be dynamically loaded by the cli.
the cli will hookup the code generator with the sink and give it the input json file.
